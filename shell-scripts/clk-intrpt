#!/usr/bin/env bash

switchToWindow=4

function beep() {
  for (( i=0; i<20; i++ )); do
    tput bel
    sleep 0.225
  done
  #wmctrl -s $switchToWindow
}

clear
echo "###############################"
echo "#### Starting intrpt timer ####"
echo "###############################"

while true; do

  sleep 0.5
  time_val=$(date)
  #printf "\\r$time_val"
  echo -ne "\\r$time_val"

  time_min=$(echo $time_val | cut -d' ' -f 5)
  time_min=${time_min:3:5}
  #echo $time_min
  if [[ $(egrep '(00:00|30:00)$' <(echo $time_min)) ]]; then
  #if [[ $(egrep '(25:00|55:00)$' <(echo $time_min)) ]]; then
    echo ""
    echo "-------------------------------"
    beep&
  fi
  if [[ $(egrep '(25:00|55:00)$' <(echo $time_min)) ]]; then
  #if [[ $(egrep '(25:00|55:00)$' <(echo $time_min)) ]]; then
    echo ""
    echo "-------------------------------"
    beep&
    wmctrl -s 2
    gedit /home/ncoder/.local/share/notes@maestroschan.fr/0_text &
    echo $pid
  fi
done

